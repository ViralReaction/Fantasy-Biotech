<?xml version="1.0" encoding="utf-8"?>
<Patch>

	<!-- Remove Power Comps -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestCasket" or defName="DeathrestAccelerator"]/comps/li[@Class="CompProperties_Power"]</xpath>
		<match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[defName="DeathrestCasket" or defName="DeathrestAccelerator"]/comps/li[@Class="CompProperties_Power"]</xpath>
		</match>
	</Operation>

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestCasket" or defName="DeathrestAccelerator"]/comps/li[@Class="CompProperties_Flickable"]</xpath>
		<match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[defName="DeathrestCasket" or defName="DeathrestAccelerator"]/comps/li[@Class="CompProperties_Flickable"]</xpath>
		</match>
	</Operation>

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[@Name="DeathrestBuildingHemogenFueled"]/comps/li[@Class="CompProperties_Power"]</xpath>
		<match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[@Name="DeathrestBuildingHemogenFueled"]/comps/li[@Class="CompProperties_Power"]</xpath>
		</match>
	</Operation>

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[@Name="DeathrestBuildingHemogenFueled"]/comps/li[@Class="CompProperties_Flickable"]</xpath>
		<match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[@Name="DeathrestBuildingHemogenFueled"]/comps/li[@Class="CompProperties_Flickable"]</xpath>
		</match>
	</Operation>

	<!-- Set Tech Level -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestCasket"]/techLevel</xpath>
		<match Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]/techLevel</xpath>
			<value>
				<techLevel>Medieval</techLevel>
			</value>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]</xpath>
			<value>
				<techLevel>Medieval</techLevel>
			</value>
		</nomatch>
	</Operation>

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[@Name="DeathrestBuildingBase"]/techLevel</xpath>
		<match Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[@Name="DeathrestBuildingBase"]/techLevel</xpath>
			<value>
				<techLevel>Medieval</techLevel>
			</value>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[@Name="DeathrestBuildingBase"]</xpath>
			<value>
				<techLevel>Medieval</techLevel>
			</value>
		</nomatch>
	</Operation>

	<!-- Remove Componentes -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestAccelerator" or
			defName="PsychofluidPump" or
			defName="Hemopump" or
			defName="HemogenAmplifier" or
			defName="GlucosoidPump" or
			defName="DeathrestCasket"
			]/costList/ComponentIndustrial</xpath>
		<match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[defName="DeathrestAccelerator" or
				defName="PsychofluidPump" or
				defName="Hemopump" or
				defName="HemogenAmplifier" or
				defName="GlucosoidPump" or
				defName="DeathrestCasket"
				]/costList/ComponentIndustrial</xpath>
		</match>
	</Operation>

	<!-- Remove Steel -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestAccelerator" or
			defName="PsychofluidPump" or
			defName="Hemopump" or
			defName="HemogenAmplifier" or
			defName="GlucosoidPump" or
			defName="DeathrestCasket"]/costList/Steel</xpath>
		<match Class="PatchOperationRemove">
			<xpath>Defs/ThingDef[defName="DeathrestAccelerator" or
				defName="PsychofluidPump" or
				defName="Hemopump" or
				defName="HemogenAmplifier" or
				defName="GlucosoidPump" or
				defName="DeathrestCasket"]/costList/Steel</xpath>
		</match>
	</Operation>

	<!-- Deathrest Accelerator -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestAccelerator"]/costList/HemogenPack</xpath>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="DeathrestAccelerator"]/costList</xpath>
			<value>
				<HemogenPack>30</HemogenPack>
			</value>
		</nomatch>
	</Operation>

	<!-- Psychofluid Pump -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="PsychofluidPump"]</xpath>
		<value>
			<costStuffCount>300</costStuffCount>
			<stuffCategories>
				<li>Stony</li>
				<li>Metallic</li>
			</stuffCategories>
		</value>
	</Operation>

	<!-- Hemopump and Hemogen Amplifier -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Hemopump" or defName="HemogenAmplifier"]/costList</xpath>
		<value>
			<Gold>5</Gold>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="Hemopump" or defName="HemogenAmplifier"]</xpath>
		<value>
			<costStuffCount>150</costStuffCount>
			<stuffCategories>
				<li>Stony</li>
				<li>Metallic</li>
			</stuffCategories>
		</value>
	</Operation>

	<!-- Glucosoid Pump -->
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="GlucosoidPump"]/costList</xpath>
		<value>
			<Gold>10</Gold>
		</value>
	</Operation>

	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="GlucosoidPump"]</xpath>
		<value>
			<costStuffCount>300</costStuffCount>
			<stuffCategories>
				<li>Stony</li>
				<li>Woody</li>
			</stuffCategories>
		</value>
	</Operation>

	<!-- Deathrest Casket -->
	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestCasket"]/costList/Gold</xpath>
		<match Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]/costList/Gold</xpath>
			<value>
				<Gold>10</Gold>
			</value>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]/costList</xpath>
			<value>
				<Gold>10</Gold>
			</value>
		</nomatch>
	</Operation>

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestCasket"]/costStuffCount</xpath>
		<match Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]/costStuffCount</xpath>
			<value>
				<costStuffCount>100</costStuffCount>
			</value>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]</xpath>
			<value>
				<costStuffCount>100</costStuffCount>
			</value>
		</nomatch>
	</Operation>

	<Operation Class="PatchOperationConditional">
		<xpath>Defs/ThingDef[defName="DeathrestCasket"]/stuffCategories</xpath>
		<match Class="PatchOperationReplace">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]/stuffCategories</xpath>
			<value>
				<stuffCategories>
					<li>Stony</li>
					<li>Woody</li>
					<li>Metallic</li>
				</stuffCategories>
			</value>
		</match>
		<nomatch Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="DeathrestCasket"]</xpath>
			<value>
				<stuffCategories>
					<li>Stony</li>
					<li>Woody</li>
					<li>Metallic</li>
				</stuffCategories>
			</value>
		</nomatch>
	</Operation>

</Patch>